{% extends "base_auth.html" %}

{% block title %}Zresetuj hasło – Wood Power CRM{% endblock %}

{% block content %}
<div class="auth-header">
    <h2>Ustaw nowe hasło 🔄</h2>
    <p>Wprowadź nowe hasło dla swojego konta</p>
</div>

<form method="POST" action="{{ url_for('reset_password_token', token=token) }}" class="auth-form" id="resetPasswordForm">
    <!-- New Password -->
    <div class="form-group" id="newPasswordGroup">
        <div class="input-wrapper">
            <span class="input-icon">🔒</span>
            <input 
                type="password" 
                id="new_password" 
                name="new_password" 
                class="form-input" 
                placeholder=" "
                autocomplete="new-password"
                required
            >
            <label class="floating-label" for="new_password">Nowe hasło</label>
            <button type="button" class="password-toggle" id="toggleNewPassword">
                👁️
            </button>
        </div>
        {% if new_password_error %}
        <div class="error-message">{{ new_password_error }}</div>
        {% else %}
        <div class="error-message" style="display: none;"></div>
        {% endif %}
        <div class="password-requirements">
            <div class="requirement" id="req-length">
                <span class="req-icon">○</span>
                <span class="req-text">Minimum 8 znaków</span>
            </div>
            <div class="requirement" id="req-uppercase">
                <span class="req-icon">○</span>
                <span class="req-text">Jedna wielka litera</span>
            </div>
            <div class="requirement" id="req-lowercase">
                <span class="req-icon">○</span>
                <span class="req-text">Jedna mała litera</span>
            </div>
            <div class="requirement" id="req-number">
                <span class="req-icon">○</span>
                <span class="req-text">Jedna cyfra</span>
            </div>
        </div>
    </div>

    <!-- Repeat Password -->
    <div class="form-group" id="repeatPasswordGroup">
        <div class="input-wrapper">
            <span class="input-icon">🔒</span>
            <input 
                type="password" 
                id="repeat_password" 
                name="repeat_password" 
                class="form-input" 
                placeholder=" "
                autocomplete="new-password"
                required
            >
            <label class="floating-label" for="repeat_password">Powtórz nowe hasło</label>
            <button type="button" class="password-toggle" id="toggleRepeatPassword">
                👁️
            </button>
        </div>
        {% if repeat_password_error %}
        <div class="error-message">{{ repeat_password_error }}</div>
        {% else %}
        <div class="error-message" style="display: none;"></div>
        {% endif %}
    </div>

    <!-- Submit button -->
    <button type="submit" class="submit-button" id="submitButton" disabled>
        Zmień hasło
    </button>
</form>

<!-- Back to login link -->
<div class="auth-footer">
    <a href="{{ url_for('login') }}" class="footer-link">
        ← Powrót do logowania
    </a>
</div>
{% endblock %}