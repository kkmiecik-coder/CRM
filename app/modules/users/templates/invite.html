<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Zaproś użytkownika - Wood Power CRM</title>
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="image/png">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('users.static', filename='css/users.css') }}">
</head>
<body>
    <div class="app-container">
        {% include 'sidebar/sidebar.html' %}
        <main class="main-content">

            <h1 class="title-with-underline">Zaproś nowego użytkownika</h1>

            <!-- Flash messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                <div class="flash flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
            {% endif %}
            {% endwith %}

            <div class="add-new-user-box">
                <form action="{{ url_for('users.invite_user') }}" method="post" class="inputs-new-user">
                    
                    <!-- Rola -->
                    <div class="role-input">
                        <label class="input-txt" for="invite_role">Rola:</label>
                        <div class="input-new-user">
                            <select name="invite_role" id="invite_role" class="select-role">
                                <option value="user" selected>user</option>
                                <option value="admin">admin</option>
                                <option value="partner">partner</option>
                            </select>
                        </div>
                    </div>

                    <!-- Mnożnik partnera -->
                    <div class="multiplier-select" id="inviteMultiplierRow" style="display: none;">
                        <label class="input-txt" for="invite_multiplier">Mnożnik partnera:</label>
                        <div class="input-new-user">
                            <select name="invite_multiplier" id="invite_multiplier" class="select-role">
                                {% for m in multipliers %}
                                <option value="{{ m.id }}">{{ m.client_type }} ({{ m.multiplier }})</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="email-input">
                        <label class="input-txt" for="invite_email">E-mail:</label>
                        <div class="input-new-user">
                            <input type="email" id="invite_email" name="invite_email" class="plain-input" required>
                        </div>
                    </div>

                    <!-- Przycisk submit -->
                    <button type="submit" class="orange-button">Wyślij zaproszenie</button>
                </form>
            </div>

        </main>
    </div>

    <script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>
    <script src="{{ url_for('users.static', filename='js/users.js') }}"></script>
</body>
</html>